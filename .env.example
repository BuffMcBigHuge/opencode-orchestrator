# ============================================================
# GitHub Configuration
# ============================================================

# Personal Access Token with repo scope
# Generate at: https://github.com/settings/tokens
# Required permissions: Contents (R/W), Issues (R/W), Pull requests (R/W), Checks (R)
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Repository to monitor (owner/repo format)
GITHUB_REPO=your-username/your-repo

# Your GitHub username (for identifying bot comments)
GITHUB_USERNAME=your-username

# ============================================================
# User Whitelist (Optional - for public repos)
# ============================================================

# Comma-separated list of GitHub usernames allowed to create ai-task issues
# Leave empty or unset to allow ALL users (default behavior)
# When set, only issues from these users will be picked up
# Example: ALLOWED_USERS=BuffMcBigHuge,contributor1,contributor2
ALLOWED_USERS=

# Note: Users not in the whitelist can still have their issues processed
# if a whitelisted user adds the 'ai-approved' label to their issue.
# This allows transferring/approving issues from the community.

# ============================================================
# Scheduler Configuration  
# ============================================================

# How often to poll GitHub (milliseconds)
# Default: 300000 (5 minutes)
POLL_INTERVAL_MS=300000

# Maximum concurrent tasks
# Each task uses ~500MB-1GB RAM (OpenCode + LSP)
# Default: 2
MAX_CONCURRENT_TASKS=2

# ============================================================
# OpenCode Configuration
# ============================================================

# Path to project repository (main worktree) - ABSOLUTE PATH
PROJECT_PATH=/path/to/your/project

# Worktree directory (relative to PROJECT_PATH)
WORKTREE_DIR=.worktrees

# Note: OpenCode model and API keys are managed by opencode/oh-my-opencode
# Configure these in ~/.config/opencode/ (see README for details)

# ============================================================
# Testing Strategy
# ============================================================

# Enable Ralph Loop for autonomous testing
RALPH_LOOP_ENABLED=true

# Max Ralph Loop iterations before declaring failure
RALPH_LOOP_MAX_ITERATIONS=100

# Enable Playwright E2E testing for web features
PLAYWRIGHT_E2E_ENABLED=true

# Minimum test coverage percentage (0-100)
MIN_TEST_COVERAGE=80

# ============================================================
# Quality Gates
# ============================================================

# Enforce quality gates before PR creation
ENFORCE_QUALITY_GATES=true

# Max attempts to fix quality gate failures
MAX_QUALITY_ATTEMPTS=3

# ============================================================
# Task State Management
# ============================================================

# Post checkpoint comments every X minutes
CHECKPOINT_INTERVAL_MINUTES=30

# Keep worktrees for X days after task completion
WORKTREE_RETENTION_DAYS=7

# Automatically clean worktrees older than retention
AUTO_CLEAN_WORKTREES=false

# ============================================================
# CI/CD Integration
# ============================================================

# Max minutes to wait for CI completion
CI_WAIT_TIMEOUT_MINUTES=10

# Require CI to pass before creating PR
REQUIRE_CI_PASS=true

# ============================================================
# Documentation
# ============================================================

# Auto-generate documentation after implementation
AUTO_GENERATE_DOCS=true

# Auto-update README for user-facing features
AUTO_UPDATE_README=true

# Documentation framework (typedoc, jsdoc, etc.)
DOC_FRAMEWORK=typedoc



# ============================================================
# Logging & Debugging
# ============================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Share OpenCode sessions publicly (for transparency)
SHARE_SESSIONS=true

# Progress update frequency during long tasks (minutes)
PROGRESS_UPDATE_INTERVAL_MINUTES=10
